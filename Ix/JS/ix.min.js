(function(t,r){var e="object"==typeof exports&&exports&&("object"==typeof t&&t&&t==t.global&&(window=t),exports);"function"==typeof define&&define.amd?define(["Ix","exports"],function(e,n){return t.Ix=r(t,n,e),t.Ix}):"object"==typeof module&&module&&module.exports==e?module.exports=r(t,module.exports,require("./l2o")):t.Ix=r(t,{},t.Ix)})(this,function(t,r,e){function n(){}function u(t){return t}function o(t,r){return t>r?1:r>t?-1:0}function i(t,r){return t===r}function f(t,r){r||(r=i);for(var e=0,n=this.length;n>e;e++)if(r(t,this[e]))return e;return-1}function s(t,r,e){var n=[],u=t.getEnumerator();try{if(!u.moveNext())throw Error(m);var o=u.getCurrent(),i=r(o);for(n.push(o);u.moveNext();){var f=u.getCurrent(),s=r(f),c=e(s,i);0===c?n.push(f):c>0&&(n=[f],i=s)}}finally{u.dispose()}return w(n)}function c(t){this.readerCount=t,this.list={},this.length=0}function a(){this.list=[],this.length=0}function h(t,r){return function(){t.apply(r,arguments)}}function l(t,r){var e=this;return new d(function(){var n,u,o=t;return N(function(){if(u||(u=e.getEnumerator()),!u.moveNext())return!1;var t=u.getCurrent();return o=r(o,t),n=o,!0},function(){return n},function(){u&&u.dispose()})})}function p(t){var r=this;return new d(function(){var e,n,u,o=!1;return N(function(){for(n||(n=r.getEnumerator());;){if(!n.moveNext())return!1;var i=n.getCurrent();{if(o)return u=t(u,i),e=u,!0;o=!0,u=i}}},function(){return e},function(){n&&n.dispose()})})}function g(t,r){return new d(function(){var e,n,u;return N(function(){for(i||(i=t.getEnumerator());;){var n,o;try{n=i.moveNext(),o=i.getCurrent()}catch(i){u=r(i);break}return n?(e=o,!0):!1}return u?(i.dispose(),i=u.getEnumerator(),i.moveNext()?(e=i.getCurrent(),!0):!1):undefined},function(){return e},function(){n&&n.dispose()})})}var m="Sequence contains no elements.",v=Array.prototype.slice,d=e.Enumerable,y=d.prototype,E=d.concat,x=d.empty,w=d.fromArray,C=d.repeat,N=e.Enumerator.create;inherits=e.internals.inherits,y.isEmpty=function(){return!this.any()},y.minBy=function(t,r){return r||(r=o),s(this,t,function(t,e){return-r(t,e)})},y.maxBy=function(t,r){return r||(r=o),s(this,t,r)};var b=function(){function t(t){this.disposed=!1,this.source=t}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t,r=this;return N(function(){return r.source.moveNext()?(t=r.source.getCurrent(),!0):!1},function(){return t})},t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.source.dispose(),this.source=null)},t}();y.share=function(t){var r=this;return t?new d(function(){return t(r.share()).getEnumerator()}):new b(r.getEnumerator())};var k=c.prototype;k.clear=function(){this.list={},this.length=0},k.get=function(t){if(!this.list[t])throw Error("Element no longer available in the buffer.");var r=this.list[t];return 0===--r.length&&delete this.list[t],r.value},k.push=function(t){this.list[this.length]={value:t,length:this.readerCount},this.length++},k.done=function(t){for(var r=t;this.length>r;r++)this.get(r);this.readerCount--};var O=function(){function t(t){this.source=t,this.buffer=new c(0),this.disposed=!1,this.stopped=!1,this.error=null}function r(t){var r,e=this,n=!1,u=!0,o=!1;return N(function(){if(e.disposed)throw Error("Object disposed");u||t++;var i,f=!1;if(t>=e.buffer.length){if(!e.stopped)try{f=e.source.moveNext(),f&&(i=e.source.getCurrent())}catch(s){e.stopped=!0,e.error=s,e.source.dispose(),n=!0}if(e.stopped){if(e.error)throw e.buffer&&e.buffer.done(t+1),o=!0,e.error;return e.buffer&&e.buffer.done(t+1),o=!0,!1}f&&e.buffer.push(i)}else f=!0;return f?(r=e.buffer.get(t),u=!1,!0):(e.buffer&&e.buffer.done(t+1),o=!0,!1)},function(){return r},function(){o&&e.buffer&&e.buffer.done(t)})}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t=this.buffer.length;return this.buffer.readerCount++,r.call(this,t)},t.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},t}();y.publish=function(t){var r=this;return t?new d(function(){return t(r.publish()).getEnumerator()}):new O(r.getEnumerator())};var A=a.prototype;A.done=n,A.push=function(t){this.list[this.length++]=t},A.clear=function(){this.list=[],this.length=0},A.get=function(t){return this.list[t]};var j=function(){function t(t,r){this.source=t,this.buffer=r,this.stopped=!1,this.error=null,this.disposed=!1}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t,r=0,e=this,n=!1,u=!0,o=!1;return N(function(){if(e.disposed)throw Error("Object disposed");u||r++;var i,f=!1;if(r>=e.buffer.length){if(!e.stopped)try{f=e.source.moveNext(),f&&(i=e.source.getCurrent())}catch(s){e.stopped=!0,e.error=s,e.source.dispose(),n=!0}if(e.stopped){if(e.error)throw e.buffer&&e.buffer.done(r+1),o=!0,e.error;return e.buffer&&e.buffer.done(r+1),o=!0,!1}f&&e.buffer.push(i)}else f=!0;return f?(t=e.buffer.get(r),u=!1,!0):(e.buffer&&e.buffer.done(r+1),o=!0,!1)},function(){return t},function(){o&&e.buffer&&e.buffer.done(r)})},t.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},t}();y.memoize=function(){var t=this;return 0===arguments.length?new j(t.getEnumerator(),new a):1===arguments.length&&"function"==typeof arguments[0]?new d(function(){return arguments[1](t.memoize()).getEnumerator()}):1===arguments.length&&"number"==typeof arguments[0]?new j(t.getEnumerator(),new c(arguments[0])):new d(function(){return arguments[1](t.memoize(arguments[0])).getEnumerator()})},d.throwException=function(t){return new d(function(){return N(function(){throw t},n)})};var S=d.defer=function(t){return new d(function(){var r;return N(function(){return r||(r=t().getEnumerator()),r.moveNext()},function(){return r.getCurrent()},function(){r.dispose()})})};d.generate=function(t,r,e,n){return new d(function(){var u,o,i=!1;return N(function(){if(i){if(u=e(u),!r(u))return!1}else u=t,i=!0;return o=n(u),!0},function(){return o})})},d.using=function(t,r){return new d(function(){var e,n,u,o=!0;return N(function(){return o&&(u=t(),n=r(u).getEnumerator(),o=!1),n.moveNext()?(e=n.getCurrent(),!0):!1},function(){return e},function(){n&&n.dispose(),u&&u.dispose()})})},y.doAction=function(t,r,e){var u,o,i,f=this;return"object"==typeof t?(u=h(t.onNext,t),o=h(t.onError,t),i=h(t.onCompleted,t)):(u=t,o=r||n,i=e||n),new d(function(){var t,r;return N(function(){t||(t=f.getEnumerator());try{if(!t.moveNext())return i(),!1;r=t.getCurrent()}catch(t){throw o(t),t}return u(r),!0},function(){return r},function(){t&&t.dispose()})})},y.bufferWithCount=function(t,r){var e=this;return null==r&&(r=t),new d(function(){var n,u,o=[],i=0;return N(function(){for(n||(n=e.getEnumerator());;){if(!n.moveNext())return o.length>0?(u=d.fromArray(o.shift()),!0):!1;0===i%r&&o.push([]);for(var f=0,s=o.length;s>f;f++)o[f].push(n.getCurrent());if(o.length>0&&o[0].length===t)return u=d.fromArray(o.shift()),++i,!0;++i}},function(){return u},function(){n.dispose()})})},y.ignoreElements=function(){var t=this;return new d(function(){var r;return N(function(){for(r=t.getEnumerator();r.moveNext(););return!1},function(){throw Error("Operation is not valid due to the current state of the object.")},function(){r.dispose()})})},y.distinctBy=function(t,r){r||(r=i);var e=this;return new d(function(){var n,u,o=[];return N(function(){for(u||(u=e.getEnumerator());;){if(!u.moveNext())return!1;var i=u.getCurrent(),s=t(i);if(-1===f.call(o,s,r))return o.push(i),n=i,!0}},function(){return n},function(){u&&u.dispose()})})},y.distinctUntilChanged=function(t,r){t||(t=u),r||(r=i);var e=this;return new d(function(){var n,u,o,i;return N(function(){for(u||(u=e.getEnumerator());;){if(!u.moveNext())return!1;var f=u.getCurrent(),s=t(f),c=!1;if(i&&(c=r(o,s)),!i||!c)return n=f,o=s,i=!0,!0}},function(){return n},function(){u&&u.dispose()})})},y.expand=function(t){var r=this;return new d(function(){var e,n,u=[r];return N(function(){for(;;){if(!n){if(0===u.length)return!1;n=u.shift().getEnumerator()}if(n.moveNext())return e=n.getCurrent(),u.push(t(e)),!0;n.dispose(),n=null}},function(){return e},function(){n&&n.dispose()})})},y.startWith=function(){return E(w(v.call(arguments)),this)},y.scan=function(){var t=1===arguments.length?p:l;return t.apply(this,arguments)},y.takeLast=function(t){var r=this;return new d(function(){var e,n,u;return N(function(){if(n||(n=r.getEnumerator()),!u)for(u=[];n.moveNext();)u.push(n.getCurrent()),u.length>t&&u.shift();return 0===u.length?!1:(e=u.shift(),!0)},function(){return e},function(){n&&n.dispose()})})},y.skipLast=function(t){var r=this;return new d(function(){var e,n,u=[];return N(function(){for(n||(n=r.getEnumerator());;){if(!n.moveNext())return!1;if(u.push(n.getCurrent()),u.length>t)return e=u.shift(),!0}},function(){return e},function(){n&&n.dispose()})})},y.repeat=function(t){var r=this;return C(0,t).selectMany(function(){return r})},y.catchException=function(t){if(0===arguments.length)return q(this);if("function"==typeof t)return g(this,t);var r=v.call(arguments);return r.unshift(this),q.apply(null,r)};var q=d.catchException=function(){var t=d.fromArray(arguments);return new d(function(){var r,e,n,u;return N(function(){for(r||(r=t.getEnumerator());;){for(;;){if(!e){if(!r.moveNext()){if(u)throw u;return!1}u=null,e=r.getCurrent().getEnumerator()}var o,i;try{o=e.moveNext(),i=e.getCurrent()}catch(f){u=f,e.dispose(),e=null;break}if(!o){e.dispose(),e=null;break}return n=i,!0}if(null==u)break}},function(){return n},function(){e&&e.dispose(),r&&r.dispose()})})};y.finallyDo=function(t){var r=this;return new d(function(){var e,n=!1;return N(function(){u||(u=r.getEnumerator());var e;try{return e=u.moveNext(),e?e:(t(),n=!0,!1)}catch(u){throw t(),n=!0,u}},function(){return e.getCurrent()},function(){!n&&t(),e&&e.dispose()})})},y.onErrorResumeNext=function(t){return I.apply(null,[this,t])};var I=d.onErrorResumeNext=function(){var t=arguments;return new d(function(){var r,e,n=0;return N(function(){for(;t.length>n;){e||(e=t[n].getEnumerator());try{var u=e.moveNext();if(u)return r=e.getCurrent(),!0}catch(o){}e.dispose(),e=null,n++}return!1},function(){return r},function(){e&&e.dispose()})})};y.retry=function(t){var r=this;return new d(function(){var e,n,u=t,o=null!=t;return N(function(){for(n||(n=r.getEnumerator());;)try{return n.moveNext()?(e=n.getCurrent(),!0):!1}catch(t){if(o&&0===--u)throw t;n=r.getEnumerator(),error=null}},function(){return e},function(){n.dispose()})})};var D=d.whileDo=function(t,r){return C(r).takeWhile(t).selectMany(u)};return d.ifThen=function(t,r,e){return e||(e=x()),S(function(){return t()?r:e})},d.doWhile=function(t,r){return t.concat(D(r,t))},d.cases=function(t,r,e){return e||(e=x()),S(function(){var n=r[t()];return n||(n=e),n})},d.forIn=function(t,r){return t.select(r)},e});