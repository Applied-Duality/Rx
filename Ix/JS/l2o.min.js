(function(r){function t(){}function e(r){return r}function n(r,t){return r>t?1:t>r?-1:0}function u(r,t){return r===t}function o(r){return""+r}function i(r,t,e,n){this.keySelector=r,this.comparer=t,this.descending=e,this.next=n}var f="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(r=global),exports),s={internals:{}},a="Sequence contains no elements.",c="Invalid operation",l=Array.prototype.slice,m={}.hasOwnProperty,h=s.internals.inherits=function(r,t){function e(){this.constructor=r}for(var n in t)"prototype"!==n&&m.call(t,n)&&(r[n]=t[n]);return e.prototype=t.prototype,r.prototype=new e,r.super_=t.prototype,r},v=s.Enumerator=function(r,t,e){this.moveNext=r,this.getCurrent=t,this.dispose=e},g=v.create=function(r,e,n){var u=!1;return n||(n=t),new v(function(){if(u)return!1;var t=r();return t||(u=!0,n()),t},function(){return e()},function(){u||(n(),u=!0)})},p=s.Enumerable=function(){function r(r){this.getEnumerator=r}function t(r,t,n){n||(n=e);var u=r,o=this.getEnumerator(),i=0;try{for(;o.moveNext();)u=t(u,o.getCurrent(),i++,this)}finally{o.dispose()}return n?n(u):u}function n(r){var t,e=this.getEnumerator(),n=0;try{if(!e.moveNext())throw Error(a);for(t=e.getCurrent();e.moveNext();)t=r(t,e.getCurrent(),n++,this)}finally{e.dispose()}return t}function i(r,t){t||(t=u);for(var e=this.length;e--;)if(t(this[e],r))return e;return-1}function f(r,t){var e=i.call(this,r,t);return-1===e?!1:(this.splice(e,1),!0)}var s=r.prototype;return s.aggregate=function(){var r=1===arguments.length?n:t;return r.apply(this,arguments)},s.reduce=function(){return 2===arguments.length?t.call(this,arguments[1],arguments[0]):n.apply(this,arguments)},s.all=s.every=function(r){var t=this.getEnumerator(),e=arguments[1];try{for(;t.moveNext();)if(!r(t.getCurrent(),e))return!1}finally{t.dispose()}return!0},s.any=s.some=function(r){var t=this.getEnumerator(),e=arguments[1];try{for(;t.moveNext();)if(!r||r(t.getCurrent(),e))return!0}finally{t.dispose()}return!1},s.average=function(r){if(r)return this.select(r).average();var t=this.getEnumerator(),e=0,n=0;try{for(;t.moveNext();)e++,n+=t.getCurrent()}finally{t.dispose()}if(0===e)throw Error(a);return n/e},s.concat=function(){var r=l.call(arguments,0);return r.unshift(this),y.apply(null,r)},s.contains=function(r,t){t||(t=u);var e=this.getEnumerator();try{for(;e.moveNext();)if(t(r,e.getCurrent()))return!0}finally{e.dispose()}return!1},s.count=function(r){var t=0,e=this.getEnumerator();try{for(;e.moveNext();)(!r||r(e.getCurrent()))&&t++}finally{e.dispose()}return t},s.defaultIfEmpty=function(t){var e=this;return new r(function(){var r,n,u=!0,o=!1;return g(function(){return n||(n=e.getEnumerator()),o?!1:u?(u=!1,n.moveNext()?(r=n.getCurrent(),!0):(r=t,o=!0,!0)):n.moveNext()?(r=n.getCurrent(),!0):!1},function(){return r},function(){n&&n.dispose()})})},s.distinct=function(t){t||(t=u);var e=this;return new r(function(){var r,n,u=[];return g(function(){for(n||(n=e.getEnumerator());;){if(!n.moveNext())return!1;if(r=n.getCurrent(),-1===i.call(u,r,t))return u.push(r),!0}},function(){return r},function(){n.dispose()})})},s.elementAt=function(r){return this.skip(r).first()},s.elementAtOrDefault=function(r){return this.skip(r).firstOrDefault()},s.except=function(t,e){e||(e=u);var n=this;return new r(function(){var r,u,o=[],f=n.getEnumerator();try{for(;f.moveNext();)o.push(f.getCurrent())}finally{f.dispose()}return g(function(){for(u||(u=t.getEnumerator());;){if(!u.moveNext())return!1;if(r=u.getCurrent(),-1===i.call(o,r,e))return o.push(r),!0}},function(){return r},function(){u&&u.dispose()})})},s.first=function(r){var t=this.getEnumerator();try{for(;t.moveNext();){var e=t.getCurrent();if(!r||r(e))return e}}finally{t.dispose()}throw Error(a)},s.firstOrDefault=function(r){var t=this.getEnumerator();try{for(;t.moveNext();){var e=t.getCurrent();if(!r||r(e))return e}}finally{t.dispose()}return null},s.forEach=function(r){var t=this.getEnumerator(),e=0;try{for(;t.moveNext();)r(t.getCurrent(),e++)}finally{t.dispose()}},s.groupBy=function(t,n,u,i){n||(n=e),i||(i=o);var f=this;return new r(function(){var r,e,o,s,a,c,l={},m=[],h=0,v=f.getEnumerator();try{for(;v.moveNext();)o=v.getCurrent(),s=t(o),a=i(s),l[a]||(l[a]=[],m.push(a)),c=n(o),l[a].push(c)}finally{v.dispose()}return g(function(){var t;return m.length>h?(e=m[h++],t=E(l[e]),u?r=u(e,t):(t.key=e,r=t),!0):!1},function(){return r})})},s.intersect=function(t,e){e||(e=u);var n=this;return new r(function(){var r,u,o=[],i=n.getEnumerator();try{for(;i.moveNext();)o.push(i.getCurrent())}finally{i.dispose()}return g(function(){for(u||(u=t.getEnumerator());;){if(!u.moveNext())return!1;if(r=u.getCurrent(),f.call(o,r,e))return!0}},function(){return r},function(){u&&u.dispose()})})},s.last=function(r){var t,e=!1,n=this.getEnumerator();try{for(;n.moveNext();){var u=n.getCurrent();(!r||r(u))&&(e=!0,t=u)}}finally{n.dispose()}if(e)return t;throw Error(a)},s.lastOrDefault=function(r){var t,e=!1,n=this.getEnumerator();try{for(;n.moveNext();){var u=n.getCurrent();(!r||r(u))&&(e=!0,t=u)}}finally{n.dispose()}return e?t:null},s.max=function(r){if(r)return this.select(r).max();var t,e=!1,n=this.getEnumerator();try{for(;n.moveNext();){var u=n.getCurrent();e?u>t&&(t=u):(t=u,e=!0)}}finally{n.dispose()}if(!e)throw Error(a);return t},s.min=function(r){if(r)return this.select(r).min();var t,e=!1,n=this.getEnumerator();try{for(;n.moveNext();){var u=n.getCurrent();e?t>u&&(t=u):(t=u,e=!0)}}finally{n.dispose()}if(!e)throw Error(a);return t},s.orderBy=function(r,t){return new x(this,r,t,!1)},s.orderByDescending=function(r,t){return new x(this,r,t,!0)},s.reverse=function(){var r=[],t=this.getEnumerator();try{for(;t.moveNext();)r.unshift(t.getCurrent())}finally{t.dispose()}return E(r)},s.select=function(t){var e=this;return new r(function(){var r,n,u=0;return g(function(){return n||(n=e.getEnumerator()),n.moveNext()?(r=t(n.getCurrent(),u++),!0):!1},function(){return r},function(){n.dispose()})})},s.selectMany=function(t,e){var n=this;return new r(function(){var r,u,o;return g(function(){for(u||(u=n.getEnumerator());;){if(!o){if(!u.moveNext())return!1;o=t(u.getCurrent()).getEnumerator()}if(o.moveNext()){if(r=o.getCurrent(),e){var i=u.getCurrent();r=e(i,r)}return!0}o.dispose(),o=null}},function(){return r},function(){o&&o.dispose(),u&&u.dispose()})})},r.sequenceEqual=function(r,t,e){return r.sequenceEqual(t,e)},s.sequenceEqual=function(r,t){t||(t=u);var e=this.getEnumerator(),n=r.getEnumerator();try{for(;e.moveNext();)if(!n.moveNext()||!t(e.getCurrent(),n.getCurrent()))return!1;return n.moveNext()?!1:!0}finally{e.dispose(),n.dispose()}},s.single=function(r){if(r)return this.where(r).single();var t=this.getEnumerator();try{for(;t.moveNext();){var e=t.getCurrent();if(t.moveNext())throw Error(c);return e}}finally{t.dispose()}throw Error(a)},s.singleOrDefault=function(r){if(r)return this.where(r).single();var t=this.getEnumerator();try{for(;t.moveNext();){var e=t.getCurrent();if(t.moveNext())throw Error(c);return e}}finally{t.dispose()}return null},s.skip=function(t){var e=this;return new r(function(){var r,n,u=!1;return g(function(){if(n||(n=e.getEnumerator()),!u){for(var o=0;t>o;o++)if(!n.moveNext())return!1;u=!0}return n.moveNext()?(r=n.getCurrent(),!0):!1},function(){return r},function(){n.dispose()})})},s.skipWhile=function(t){var e=this;return new r(function(){var r,n,u=!1;return g(function(){if(n||(n=e.getEnumerator()),!u){for(;;){if(!n.moveNext())return!1;if(!t(n.getCurrent()))return r=n.getCurrent(),!0}u=!0}return n.moveNext()?(r=n.getCurrent(),!0):!1},function(){return r},function(){n.dispose()})})},s.sum=function(r){if(r)return this.select(r).sum();var t=0,e=this.getEnumerator();try{for(;e.moveNext();)t+=e.getCurrent()}finally{e.dispose()}return t},s.take=function(t){var e=this;return new r(function(){var r,n,u=t;return g(function(){return n||(n=e.getEnumerator()),0===u?!1:n.moveNext()?(u--,r=n.getCurrent(),!0):(u=0,!1)},function(){return r},function(){n.dispose()})})},s.takeWhile=function(t){var e=this;return new r(function(){var r,n,u=0;return g(function(){return n||(n=e.getEnumerator()),n.moveNext()?(r=n.getCurrent(),t(r,u++)?!0:!1):!1},function(){return r},function(){n.dispose()})})},s.toArray=function(){var r=[],t=this.getEnumerator();try{for(;t.moveNext();)r.push(t.getCurrent());return r}finally{t.dispose()}},s.where=function(t){var e=this;return new r(function(){var r,n,u=0;return g(function(){for(n||(n=e.getEnumerator());;){if(!n.moveNext())return!1;if(r=n.getCurrent(),t(r,u++))return!0}},function(){return r},function(){n.dispose()})})},s.union=function(r,t){t||(t=u);var e=this;return d(function(){var n,u,o=[],f=!1,s=!1;return g(function(){for(;;){if(!u){if(s)return!1;f?(u=r.getEnumerator(),s=!0):(u=e.getEnumerator(),f=!0)}if(u.moveNext()){if(n=u.getCurrent(),-1===i.call(o,n,t))return o.push(n),!0}else u.dispose(),u=null}},function(){return n},function(){u&&u.dispose()})})},s.zip=function(t,e){var n=this;return new r(function(){var r,u,o;return g(function(){return r||u||(r=n.getEnumerator(),u=t.getEnumerator()),r.moveNext()&&u.moveNext()?(o=e(r.getCurrent(),u.getCurrent()),!0):!1},function(){return o},function(){r.dispose(),u.dispose()})})},r}(),y=p.concat=function(){return E(arguments).selectMany(e)},d=p.create=function(r){return new p(r)};p.empty=function(){return new p(function(){return g(function(){return!1},function(){throw Error(a)})})};var E=p.fromArray=function(r){return new p(function(){var t,e=0;return g(function(){return r.length>e?(t=r[e++],!0):!1},function(){return t})})};p.returnValue=function(r){return new p(function(){var t=!1;return g(function(){return t?!1:t=!0},function(){return r})})},p.range=function(r,t){return new p(function(){var e=r-1,n=r+t-1;return g(function(){return n>e?(e++,!0):!1},function(){return e})})},p.repeat=function(r,t){return new p(function(){var e=null==t?-1:t,n=null!=t;return g(function(){return 0!==e?(n&&e--,!0):!1},function(){return r})})},i.prototype={computeKeys:function(r,t){this.keys=Array(t);for(var e=0;t>e;e++)this.keys[e]=this.keySelector(r[e]);this.next&&this.next.computeKeys(r,t)},compareKeys:function(r,t){var e=this.comparer(this.keys[r],this.keys[t]);return 0===e?null==this.next?r-t:this.next.compareKeys(r,t):this.descending?-e:e},sort:function(r,t){this.computeKeys(r,t);for(var e=Array(t),n=0;t>n;n++)e[n]=n;return this.quickSort(e,0,t-1),e},quickSort:function(r,t,e){do{var n=t,u=e,o=r[n+(u-n>>1)];do{for(;r.length>n&&this.compareKeys(o,r[n])>0;)n++;for(;u>=0&&0>this.compareKeys(o,r[u]);)u--;if(n>u)break;if(u>n){var i=r[n];r[n]=r[u],r[u]=i}n++,u--}while(u>=n);e-n>=u-t?(u>t&&this.quickSort(r,t,u),t=n):(e>n&&this.quickSort(r,n,e),e=u)}while(e>t)}};var x=function(){function r(r,t,u,o){this.source=r,this.keySelector=t||e,this.comparer=u||n,this.descending=o}h(r,p);var t=r.prototype;return t.getEnumerableSorter=function(r){var t=new i(this.keySelector,this.comparer,this.descending,r);return null!=this.parent&&(t=this.parent.getEnumerableSorter(t)),t},t.createOrderedEnumerable=function(t,e,n){var u=new r(this.source,t,e,n);return u.parent=this,u},t.getEnumerator=function(){var r,t=this.source.toArray(),e=t.length,n=this.getEnumerableSorter(),u=n.sort(t,e),o=0;return g(function(){return e>o?(r=t[u[o++]],!0):!1},function(){return r})},t.thenBy=function(r){return this.createOrderedEnumerable(r,null,!1)},t.thenByDescending=function(r,t){return this.createOrderedEnumerable(r,t,!1)},r}();return"function"==typeof define&&"object"==typeof define.amd&&define.amd?(r.Ix=s,define(function(){return s})):(f?"object"==typeof module&&module&&module.exports==f?module.exports=s:f=s:r.Ix=s,undefined)})(this);